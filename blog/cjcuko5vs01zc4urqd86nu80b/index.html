<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/blog/lib/fancybox/source/jquery.fancybox.css" rel="stylesheet" type="text/css" />







<link href="/blog/lib/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

<link href="/blog/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/blog/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="JSF," />










<meta name="description" content="级别： 中级 Rick Hightower (rhightower@arc-mind.com), CTO, ArcMind 2005 年  3 月  01 日 本系列 怀疑论者的 JSF一共包含 4 篇文章，本文是其中的第 2 篇。在本文中，Rick Hightower 对 Java&amp;trade;Server Faces（JSF）请求处理生命周期的主要阶段进行了介绍。作者使用一个示例程序，详细介绍">
<meta name="keywords" content="JSF">
<meta property="og:type" content="article">
<meta property="og:title" content="怀疑论者的 JSF: JSF 应用程序的生命周期">
<meta property="og:url" content="https://vanessa.js.org/blog/cjcuko5vs01zc4urqd86nu80b/index.html">
<meta property="og:site_name" content="Vanessa">
<meta property="og:description" content="级别： 中级 Rick Hightower (rhightower@arc-mind.com), CTO, ArcMind 2005 年  3 月  01 日 本系列 怀疑论者的 JSF一共包含 4 篇文章，本文是其中的第 2 篇。在本文中，Rick Hightower 对 Java&amp;trade;Server Faces（JSF）请求处理生命周期的主要阶段进行了介绍。作者使用一个示例程序，详细介绍">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/developerworks/cn/java/j-jsf2/lifecycle.jpg">
<meta property="og:image" content="http://www.ibm.com/i/v14/rules/blue_rule.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/v14/icons/u_bold.gif">
<meta property="og:image" content="http://www.ibm.com/i/v14/rules/blue_rule.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/v14/icons/u_bold.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/v14/rules/blue_rule.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/v14/icons/u_bold.gif">
<meta property="og:image" content="http://www.ibm.com/i/v14/rules/blue_rule.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/v14/icons/u_bold.gif">
<meta property="og:image" content="http://www.ibm.com/i/v14/rules/blue_rule.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/v14/icons/u_bold.gif">
<meta property="og:image" content="http://www.ibm.com/developerworks/cn/java/j-jsf2/figure2.jpg">
<meta property="og:image" content="http://www.ibm.com/i/v14/rules/blue_rule.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/v14/icons/u_bold.gif">
<meta property="og:image" content="http://www.ibm.com/developerworks/cn/java/j-jsf2/figure3.jpg">
<meta property="og:image" content="http://www.ibm.com/i/v14/rules/blue_rule.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/v14/icons/u_bold.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/developerworks/cn/java/j-jsf2/figure4.jpg">
<meta property="og:image" content="http://www.ibm.com/developerworks/cn/java/j-jsf2/figure5.jpg">
<meta property="og:image" content="http://www.ibm.com/developerworks/cn/java/j-jsf2/figure6.jpg">
<meta property="og:image" content="http://www.ibm.com/i/v14/rules/blue_rule.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/v14/icons/u_bold.gif">
<meta property="og:image" content="http://www.ibm.com/i/v14/rules/blue_rule.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/v14/icons/u_bold.gif">
<meta property="og:image" content="http://www.ibm.com/i/v14/rules/blue_rule.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/v14/icons/u_bold.gif">
<meta property="og:image" content="http://www.ibm.com/i/v14/rules/blue_rule.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/v14/icons/u_bold.gif">
<meta property="og:image" content="http://www.ibm.com/i/v14/rules/blue_rule.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/v14/icons/u_bold.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:image" content="http://www.ibm.com/i/c.gif">
<meta property="og:updated_time" content="2018-01-23T20:51:15.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="怀疑论者的 JSF: JSF 应用程序的生命周期">
<meta name="twitter:description" content="级别： 中级 Rick Hightower (rhightower@arc-mind.com), CTO, ArcMind 2005 年  3 月  01 日 本系列 怀疑论者的 JSF一共包含 4 篇文章，本文是其中的第 2 篇。在本文中，Rick Hightower 对 Java&amp;trade;Server Faces（JSF）请求处理生命周期的主要阶段进行了介绍。作者使用一个示例程序，详细介绍">
<meta name="twitter:image" content="http://www.ibm.com/i/c.gif">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/blog/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://vanessa.js.org/blog/cjcuko5vs01zc4urqd86nu80b/"/>





  <title>怀疑论者的 JSF: JSF 应用程序的生命周期 | Vanessa</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/blog/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Vanessa</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/blog/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://vanessa.js.org/blog/blog/cjcuko5vs01zc4urqd86nu80b/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Vanessa">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Vanessa">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">怀疑论者的 JSF: JSF 应用程序的生命周期</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2009-03-28T01:47:00+08:00">
                2009-03-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p></p><p>级别： 中级</p><p></p>
<p></p><p><a href="http://www.ibm.com/developerworks/cn/java/j-jsf2/#author" target="_blank" rel="noopener">Rick Hightower</a> (<a href="mailto:rhightower@arc-mind.com?subject=JSF%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F&amp;cc=jaloi@us.ibm.com" target="_blank" rel="noopener">rhightower@arc-mind.com</a>), CTO, ArcMind</p><p></p>
<p></p><p>2005 年  3 月  01 日</p><p></p>
<p><blockquote>本系列 <em>怀疑论者的 JSF</em><br>一共包含 4 篇文章，本文是其中的第 2 篇。在本文中，Rick Hightower 对 Java&trade;Server Faces<br>（JSF）请求处理生命周期的主要阶段进行了介绍。作者使用一个示例程序，详细介绍了请求处理的 5 个阶段。随着介绍的深入，作者将向您展示如何在<br>JSF 中采用 JavaScript 技术对即时事件进行处理，最后简要介绍一下 JSF 中提供的众多组件来结束对 JSF 组件模型的介绍。</blockquote><br><!--START RESERVED FOR FUTURE USE INCLUDE FILES--><!-- include java script once we verify teams wants to use this and it will work on dbcs and cyrillic characters --><br><!--END RESERVED FOR FUTURE USE INCLUDE FILES--></p>
<p></p><p>与很多流行的观点不同，我们无需了解技术工作原理的所有细节，就可以编写 JSF 应用程序。您只需要给自己设置一个项目，并从头到尾不断修修补补，这样就可以学习到大量的知识。另一方面，理解必要的基础知识可以使您的开发工作更加有效 &mdash;&mdash; 而且会节省很多时间。</p><p></p>
<p></p><p>在本系列 <em>怀疑论者的 JSF</em> 的第 2 篇文章中，我们将逐一介绍一下 JSF 请求处理生命周期的 5 个阶段。我们将介绍在每个阶段中会发生什么，以及这些阶段是如何相互连接在一起的，然后使用一个示例程序来展示实际的生命周期。随着学习的深入，我们还将介绍如何使用在 <a href="http://www.ibm.com/developerworks/cn/java/j-jsf1/index.shtml" target="_blank" rel="noopener">第 1 部分</a> 中简要提及的一些内置的 JSF 组件。我们还将向您介绍如何在 JSF 开发中采用 Struts Tiles，以及如何组合使用 JSF 和 JavaScript 技术进行即时事件的处理。 </p><p></p>
<p></p><p>正如上一篇文章中介绍的一样，示例程序的默认编译环境是 Maven。您可以通过点击页面顶部或底部的 <strong>Code</strong> 图标下载源代码。为了简单性起见，您会发现与上一篇文章中一样的示例设置。有关编译环境的设置的详细说明，请参阅 <a href="http://www.ibm.com/developerworks/cn/java/j-jsf2/#resources" target="_blank" rel="noopener">参考资料</a>，其中包括使用 Ant（而不是 Maven）来编译并运行示例程序的说明。</p><p></p>
<p></p><p><a name="N10065"><span class="atitle">JSF 生命周期：概述</span></a></p><p></p>
<p></p><p>JSF 程序生命周期的 5 个阶段如下（注意每个阶段的事件处理）：</p><p></p>
<p><ol></ol></p>
<p><li>恢复视图</li></p>
<p><li>应用请求的值；处理验证</li></p>
<p><li>更新模型值；处理事件</li></p>
<p><li>调用程序；处理事件</li></p>
<p><li>进行响应；处理事件</li><br></p>
<p></p><p>这<br>5 个阶段显示了 JSF 通常处理 GUI 的顺序。虽然这个清单列出了每个阶段中事件处理的可能执行顺序，但是 JSF<br>的生命周期很难是固定一成不变的。您可以通过忽略某个阶段或合并整个生命周期从而对执行顺序进行修改。例如，如果一个无效的请求值被拷贝到一个组件中，那<br>么当前的视图就会重新显示，而有些阶段就可能不会执行。在这种情况中，您可以执行一个 <code>FacesContext.responseComplete</code> 方法调用，将用户重定向到一个不同的页面上，然后使用请求分发器（从 <code>FacesContext</code> 中的请求对象中获得）将其转发到一个适当的 Web 资源上。另外，您可以调用 <code>FacesContext.renderResponse</code> 重新显示原来的视图。（详细信息请参看下面的示例程序。）</p><p></p>
<table border="0" cellspacing="0" cellpadding="0" width="40%" align="right"><br><tbody><br><tr><br><td width="10"><img src="http://www.ibm.com/i/c.gif" alt="" width="10" height="1"></td><br><td><br><table border="1" cellspacing="0" cellpadding="5" width="100%"><br><tbody><br><tr><br><td bgcolor="#eeeeee"><br>                <a name="sidebar1"><strong>关于本系列文章</strong></a><br><br><p>这个 <a href="http://www.ibm.com/developerworks/views/java/libraryview.jsp?search_by=nonbelievers:" target="_blank" rel="noopener">4 部分的系列文章</a><br>专门用来消除那些怀疑论者对 JavaServer<br>Faces（JSF）技术的恐惧、怀疑或疑虑（FUD），方法是给您一个机会自己通过一个一步步的、容易学习的格式来了解这种技术。通过这 4<br>篇文章的教程介绍，我们将提供一系列的例子简要介绍 JSF 的基本架构、特性和功能。一旦熟悉 JSF 处理事情的方法之后，我想您将发现很难再返回<br>Struts Model 2 风格的开发了。毕竟，在体验过 JSF 的事件驱动的 GUI 组件模型之后，谁还会希望重新经历 XML<br>配置的恶梦呢？</p><br><p>要掌握本系列教程的内容，您应该熟悉 Java<br>编程、JavaBeans（即事件模型和属性）、JavaServer Pages（JSP）、JSP Standard Tag Library<br>Expression Language 以及 Web 开发的所有基本概念。</p><br></td><br></tr><br></tbody><br></table><br></td><br></tr><br></tbody><br></table><br><p>关<br>键是让生命周期构成您的开发项目，而不完全依赖于生命周期。在需要时，您可以修改生命周期，而不用担心破坏您的程序。在大部分情况中，您会发现 JSF<br>的生命周期是值得遵守的，因为它的逻辑非常好。表单必须在任何应用程序逻辑执行之前进行验证，并且在进行验证之前，必须对域中的数据进行转换。遵守生命周<br>期的规定，可以让您更自由地考虑有关验证和转换的问题，而不是请求处理本身的阶段。有一点非常重要：其他 Web<br>框架也都具有类似的生命周期；它们只不过是没有很好地进行宣传。</p><br><p><a name="N100A5"><span class="smalltitle">专注</span></a></p><br><p>有<br>些使用 JSF 的开发者可能从来都不会编写一个组件，也不会对框架进行任何扩展；而另外一些人则专注于这种任务的开发。尽管 JSF<br>的生命周期与大部分那其他项目都是相同的，但是根据在项目中的角色您可以采用不同的阶段。如果您更专注于通用的应用程序开发，就可能会关注请求处理生命周<br>期的中间阶段：</p><br><ul><br><li>应用请求值</li><br><li>更新模型值</li><br><li>调用程序</li><br></ul><br><p>如果您专注于 JSF 组件的开发，就可能会关注于整个生命周期中的第一个阶段和最后一个阶段：</p><br><ul><br><li>恢复视图</li><br><li>进行响应</li><br></ul><br><p>在接下来的几节中，我们将遍历 JSF 请求处理生命周期的每个步骤，包括事件处理和验证。了解了每个步骤的基本知识之后，我们将简要介绍一个示例程序，它可以展示这些步骤如何一起使用。在开始之前，首先来看一下图 1，这是一个有关 JSF 生命周期的图。</p><br><p><br><br>                <br><a name="figure1"><strong>图 1. JSF 生命周期</strong></a><br><br>                <img src="http://www.ibm.com/developerworks/cn/java/j-jsf2/lifecycle.jpg" alt="JSF 生命周期" width="510" height="359"><br>            <br></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td><img src="http://www.ibm.com/i/v14/rules/blue_rule.gif" alt="" width="100%" height="1"><br><img src="http://www.ibm.com/i/c.gif" border="0" alt="" width="8" height="6"></td><br></tr><br></tbody><br></table><br><table class="no-print" border="0" cellspacing="0" cellpadding="0" align="right"><br><tbody><br><tr align="right"><br><td><img src="http://www.ibm.com/i/c.gif" alt="" width="100%" height="4"><br><br><table border="0" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="middle"><img src="http://www.ibm.com/i/v14/icons/u_bold.gif" border="0" alt="" width="16" height="16"><br></td><br><td align="right" valign="top"><a class="fbox" href="http://www.ibm.com/developerworks/cn/java/j-jsf2/#main" target="_blank" rel="noopener"><strong>回页首</strong></a></td><br></tr><br></tbody><br></table><br></td><br></tr><br></tbody><br></table><br><p><br></p><br><p><a name="N100D8"><span class="atitle">阶段 1：恢复视图</span></a></p><br><p>在 JSF 生命周期的第一个阶段 &mdash;&mdash;<em>恢复视图</em> &mdash;&mdash; 中，会有一个来自 <code>FacesServlet</code> 控制器的请求。控制器会对请求进行考查，并提取出视图的 ID，这是由 JSP 页面的名字来确定的。</p><br><p>JSF 框架控制器使用这个视图 ID 来为当前的视图查找组件。如果这个视图尚未存在，那么 JSF 控制器就会创建它。如果这个视图早已存在，那么 JSF 控制器就会使用它。这个视图包含了所有的 GUI 组件。</p><br><p>生命周期的这个阶段表示为三个视图实例：新视图、原始视图和后视图，每个视图的处理方式都不相同。在 <em>新视图</em> 的情况中，JSF 会构建 <code>Faces</code> 页面的视图，并将事件处理程序和验证程序绑定到组件上。这个视图被保存在一个 <code>FacesContext</code> 对象中。</p><br><p><br>                <code>FacesContext</code> 对象包含了 JSF 用来管理当前会话中当前请求的 GUI 组件状态所需要的所有状态信息。<code>FacesContext</code> 将视图保存在自己的 <code>viewRoot</code> 属性中；<code>viewRoot</code> 包含了当前视图 ID 的所有 JSF 组件。</p><br><p>在 <em>原始视图</em> 的情况中（第一次加载的是一个页面），JSF 会创建一个空视图。这个空视图会在用户事件产生时进行填充。JSF 可以直接从原始视图过渡到进行响应的阶段。</p><br><p>在 <em>后视图（postback）</em> 的情况中（用户返回之前访问过的页面），包含页面的视图早已经存在了，因此只需要进行恢复就可以了。在这种情况中，JSF 就使用现有视图的状态信息来重构状态。后视图的下一个阶段是应用请求值。</p><br><p>&nbsp;</p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td><img src="http://www.ibm.com/i/v14/rules/blue_rule.gif" alt="" width="100%" height="1"><br><img src="http://www.ibm.com/i/c.gif" border="0" alt="" width="8" height="6"></td><br></tr><br></tbody><br></table><br><table class="no-print" border="0" cellspacing="0" cellpadding="0" align="right"><br><tbody><br><tr align="right"><br><td><img src="http://www.ibm.com/i/c.gif" alt="" width="100%" height="4"><br><br><table border="0" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="middle"><img src="http://www.ibm.com/i/v14/icons/u_bold.gif" border="0" alt="" width="16" height="16"><br></td><br><td align="right" valign="top"><a class="fbox" href="http://www.ibm.com/developerworks/cn/java/j-jsf2/#main" target="_blank" rel="noopener"><strong>回页首</strong></a></td><br></tr><br></tbody><br></table><br></td><br></tr><br></tbody><br></table><br><p><br></p><br><p><a name="N10118"><span class="atitle">阶段 2：应用请求值</span></a></p><br><p><br>                <em>应用请求值</em> 阶段的目的是让每个组件检索自己当前的状态信息。这些组件必须首先通过 <code>FacesContext</code> 对象进行检索或创建（使用其值）。虽然组件值也可以从 cookie 或头文件中进行检索，但是它们通常是通过请求参数进行检索的。</p><br><p>如果一个组件的即时事件处理属性 <em>没有</em> 设置为 <code>true</code>，那么就会对这些值进行转换。因此，如果 <code>域</code> 被绑定到一个 <code>Integer</code> 属性上，那么该值就会被转换为一个 <code>Integer</code> 类型。如果值的转换失败了，那么就会生成一个错误消息，并在 <code>FacesContext</code> 中进行排队，在产生响应的阶段会显示其中的消息，同时还会显示所有的验证错误。</p><br><p>如果一个组件的即时事件处理属性 <em>的确</em> 被设置为 <code>true</code>，那么这些值就会被转换为适当的类型，并进行有效性验证。然后转换后的值会被保存到组件中。如果值转换或值的有效性验证失败了，就会生成一个错误消息，并在 <code>FacesContext</code> 中进行排队，在产生响应的阶段会显示其中的消息，同时还会显示所有的验证错误。</p><br><table border="0" cellspacing="0" cellpadding="0" width="40%" align="right"><br><tbody><br><tr><br><td width="10"><img src="http://www.ibm.com/i/c.gif" alt="" width="10" height="1"></td><br><td><br><table border="1" cellspacing="0" cellpadding="5" width="100%"><br><tbody><br><tr><br><td bgcolor="#eeeeee"><br>                <a name="sidebar2"><strong>即时事件处理</strong></a><br><br><p>JSF<br>的即时事件处理属性用来处理那些通常不必要对整个表单进行有效性验证的事件。例如，假设一个雇员表单中有一个单选按钮来说明他是否是经理。当他选中<br>Manager<br>选项时，应用程序就会为经理生成一些内容。由于单选按钮只用来生成一个列表，而不需要用户填写整个表单，因此不需要对整个表单进行有效性验证。在这种情况<br>中，您就可以使用即时事件处理。有关这个主题的更详细内容，请参阅 <a href="http://www.ibm.com/developerworks/cn/java/j-jsf2/#immediate" target="_blank" rel="noopener">即时事件处理</a>。</p><br></td><br></tr><br></tbody><br></table><br></td><br></tr><br></tbody><br></table><br><p><a name="N10160"><span class="smalltitle">处理验证</span></a></p><br><p>生<br>命周期中的第一个事件处理发生在应用请求值阶段之后。在这个阶段中，每个组件都有一些值需要根据应用程序的验证规则进行有效性验证。这些验证规则可以是预<br>先进行定义的（JSF 中提供的），也可以由开发者进行定义。用户所输入的值会与这些验证规则进行比较。如果说输入的值无效，就会向 <code>FacesContext</code> 中添加一个错误消息，并且该组件会被表示为无效的。如果一个组件被表示为无效的，那么 JSF 就会转到产生响应的阶段，在这个阶段中会显示当前的视图，以及验证错误消息。如果没有有效性验证错误，那么 JSF 就会转到更新模型值的阶段。</p><br><p>&nbsp;</p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td><img src="http://www.ibm.com/i/v14/rules/blue_rule.gif" alt="" width="100%" height="1"><br><img src="http://www.ibm.com/i/c.gif" border="0" alt="" width="8" height="6"></td><br></tr><br></tbody><br></table><br><table class="no-print" border="0" cellspacing="0" cellpadding="0" align="right"><br><tbody><br><tr align="right"><br><td><img src="http://www.ibm.com/i/c.gif" alt="" width="100%" height="4"><br><br><table border="0" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="middle"><img src="http://www.ibm.com/i/v14/icons/u_bold.gif" border="0" alt="" width="16" height="16"><br></td><br><td align="right" valign="top"><a class="fbox" href="http://www.ibm.com/developerworks/cn/java/j-jsf2/#main" target="_blank" rel="noopener"><strong>回页首</strong></a></td><br></tr><br></tbody><br></table><br></td><br></tr><br></tbody><br></table><br><p><br></p><br><p><a name="N1016D"><span class="atitle">阶段 3：更新模型值</span></a></p><br><p>JSF 应用程序生命周期中的第三个阶段 &mdash;&mdash;<em>更新模型值</em><br>&mdash;&mdash; 负责更新服务器端模型的实际值，通常来讲，这都是通过更新后台 bean（称为管理 bean）的属性实现的。只有那些与组件值绑定在一起的<br>bean 属性才会被更新。注意这个阶段发生在有效性验证之后，因此可以确保拷贝到 bean<br>属性的值都是有效的（至少在表单域一级都是有效的；在业务规则一级仍可能无效）。</p><br><p>&nbsp;</p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td><img src="http://www.ibm.com/i/v14/rules/blue_rule.gif" alt="" width="100%" height="1"><br><img src="http://www.ibm.com/i/c.gif" border="0" alt="" width="8" height="6"></td><br></tr><br></tbody><br></table><br><table class="no-print" border="0" cellspacing="0" cellpadding="0" align="right"><br><tbody><br><tr align="right"><br><td><img src="http://www.ibm.com/i/c.gif" alt="" width="100%" height="4"><br><br><table border="0" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="middle"><img src="http://www.ibm.com/i/v14/icons/u_bold.gif" border="0" alt="" width="16" height="16"><br></td><br><td align="right" valign="top"><a class="fbox" href="http://www.ibm.com/developerworks/cn/java/j-jsf2/#main" target="_blank" rel="noopener"><strong>回页首</strong></a></td><br></tr><br></tbody><br></table><br></td><br></tr><br></tbody><br></table><br><p><br></p><br><p><a name="N10179"><span class="atitle">阶段 4：调用程序</span></a></p><br><p>在生命周期的第四个阶段 &mdash;&mdash;<em>调用程序</em> &mdash;&mdash; 中，JSF 控制程序会调用程序来处理 <code>表单</code> 的提交操作。组件值已经经过了类型转换和有效性验证，并被应用到模型对象中了，因此您现在可以使用它们来执行应用程序的业务逻辑了。</p><br><p>在这个阶段，您还可以为一个给定的序列或很多可能的序列指定后面的逻辑视图，这可以通过为一次成功的表单提交定义一个特定的结果并返回这个结果来实现。例如：<em>在成功输出时，将用户重定向到下一页中</em>。要让这种导航工作能够起作用，您需要在 faces-config.xml 文件中创建一个到 <em>成功输出</em> 的映射作为一条导航规则。一旦导航发生之后，您就转换到生命周期的最后一个阶段了。</p><br><p>&nbsp;</p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td><img src="http://www.ibm.com/i/v14/rules/blue_rule.gif" alt="" width="100%" height="1"><br><img src="http://www.ibm.com/i/c.gif" border="0" alt="" width="8" height="6"></td><br></tr><br></tbody><br></table><br><table class="no-print" border="0" cellspacing="0" cellpadding="0" align="right"><br><tbody><br><tr align="right"><br><td><img src="http://www.ibm.com/i/c.gif" alt="" width="100%" height="4"><br><br><table border="0" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="middle"><img src="http://www.ibm.com/i/v14/icons/u_bold.gif" border="0" alt="" width="16" height="16"><br></td><br><td align="right" valign="top"><a class="fbox" href="http://www.ibm.com/developerworks/cn/java/j-jsf2/#main" target="_blank" rel="noopener"><strong>回页首</strong></a></td><br></tr><br></tbody><br></table><br></td><br></tr><br></tbody><br></table><br><p><br></p><br><p><a name="N10192"><span class="atitle">阶段 5：进行响应</span></a></p><br><p>在生命周期的第五个阶段 &mdash;&mdash;<em>进行响应</em> &mdash;&mdash; 中，您可以在视图中显示当前状态中的所有组件。</p><br><p>图 2 是 JSF 生命周期的第五个阶段的一个对象状态图，包括时间有效性验证和处理。</p><br><p><br><br>                <br><a name="figure2"><strong>图 2. JSF 生命周期的五阶段</strong></a><br><br>                <img src="http://www.ibm.com/developerworks/cn/java/j-jsf2/figure2.jpg" alt="JSF 生命周期的对象状态图" width="510" height="214"><br>            <br></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td><img src="http://www.ibm.com/i/v14/rules/blue_rule.gif" alt="" width="100%" height="1"><br><img src="http://www.ibm.com/i/c.gif" border="0" alt="" width="8" height="6"></td><br></tr><br></tbody><br></table><br><table class="no-print" border="0" cellspacing="0" cellpadding="0" align="right"><br><tbody><br><tr align="right"><br><td><img src="http://www.ibm.com/i/c.gif" alt="" width="100%" height="4"><br><br><table border="0" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="middle"><img src="http://www.ibm.com/i/v14/icons/u_bold.gif" border="0" alt="" width="16" height="16"><br></td><br><td align="right" valign="top"><a class="fbox" href="http://www.ibm.com/developerworks/cn/java/j-jsf2/#main" target="_blank" rel="noopener"><strong>回页首</strong></a></td><br></tr><br></tbody><br></table><br></td><br></tr><br></tbody><br></table><br><p><br></p><br><p><a name="N101B0"><span class="atitle">范例</span></a></p><br><p>现<br>在您已经对 JSF 生命周期的阶段有了基本的了解，下面我们将向您介绍在一个范例 Web 应用程序中，这些阶段是如何协同工作的。除了展示 JSF<br>生命周期的基本功能之外，这个应用程序还会利用一些通用的 JSF GUI 组件，例如 Radio List, List, Text Field,<br>Label, Panel 等等，这样您就可以亲自体验一下在 <a href="http://www-128.ibm.com/developerworks/library/j-jsf1/" target="_blank" rel="noopener">第 1 部分</a> 中曾经简要讨论过的这些组件。</p><br><p>这个示例程序还会展示在 JSF 中使用其他 Java 技术的两种方法。它将组合使用 JSF 和 JavaScript 来启用即时事件处理（在那些对整个表单进行验证是多余的情况中），其布局是由 Struts Tiles 进行管理的。<br>虽然 Struts Tiles 并不是 JSF 的一个必要部分，但是 tiles 通常用来为一个程序中的所有 JSF 页面提供一致的外观。要学习更多有关 Struts Tiles 的内容，请参阅 <a href="http://www.ibm.com/developerworks/cn/java/j-jsf2/#resources" target="_blank" rel="noopener">参考资料</a>。</p><br><p><a name="N101C4"><span class="smalltitle">程序设置</span></a></p><br><p>这<br>个示例 Web 程序实际上是一个非常简单的创建、阅读、更新并删除（CRUD）一个在线 CD<br>仓库中库存的程序。它包括一个表单，让用户可以向系统中输入新 CD；有一些单选按钮，让用户选择音乐的分类。当用户选择一个分类时，就启动一些<br>JavaScript 脚本将这个表单立即发回服务器。程序组合采用 JSF 和 JavaScript<br>技术来处理一个组件，而不是整个页面，这种技术称为 <em>即时事件处理</em>。在这种情况中，您可以填充一个子类清单，而不用验证表单的其他内容。</p><br><p>这个示例程序还包括一个 CD 清单，它将展示如何使用 JSF 的 <code>dataTable</code>。从这个页面中，最终用户可以根据标题或者艺术家对 CD 清单进行排序。</p><br><p><a name="N101D7"><span class="smalltitle">类和方法</span></a></p><br><p>图 3 列出了这个示例程序的类。图中列出了 4 个类，我们只关注其中的 3 个：<code>StoreManagerDelegate</code>、<code>CD</code> 和 <code>StoreController</code>。</p><br><p><br><br>                <br><a name="figure3"><strong>图 3. 示例程序类</strong></a><br><br>                <img src="http://www.ibm.com/developerworks/cn/java/j-jsf2/figure3.jpg" alt="示例程序类" width="510" height="335"></p><br><p><br>                <code>StoreManagerDelegate</code> 类是这个程序的业务代表。它为整个模型呈现了主界面。<code>CD</code> 类是一个数据转换对象（DTO）。如果这是一个真实的程序，那么 <code>StoreManagerDelegate</code> 类就会为添加、删除和编辑 CD 实现所有的业务规则，还会负责使用一个数据访问对象（DAO）将 <code>CD</code> 存储到一个永久的存储介质中。<code>StoreManagerDelegate</code> 和 <code>CD</code><br>包含了一些用于这个 MVC 程序的 <em>模型</em>。</p><br><p><br>                <code>StoreController</code> 类是本例中的主要后台 bean。<code>StoreController</code> 类是 GUI 世界和模型世界之间的黏合剂。它将自己的很多行为都委托给 <code>StoreManagerDelegate</code> 进行处理。<code>StoreController</code> 是这个 MVC 程序的 <em>控制程序</em>。</p><br><p><br>                <code>StoreController</code> 类展示了如何构建一个可排序的 CRUD 清单。它具有以下与 CRUD 相关的方法：<code>editCD</code>、<code>addNew</code>、<code>addCD</code> 以及 <code>updateCD</code>。<code>StoreController</code> 还负责将模型对象呈现给表单。在这种情况中，它使用 <code>cd</code> 属性将当前的 <code>CD</code> 对象呈现给 CD 表单，该属性的类型就是 <code>CD</code>。</p><br><p>&nbsp;</p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td><img src="http://www.ibm.com/i/v14/rules/blue_rule.gif" alt="" width="100%" height="1"><br><img src="http://www.ibm.com/i/c.gif" border="0" alt="" width="8" height="6"></td><br></tr><br></tbody><br></table><br><table class="no-print" border="0" cellspacing="0" cellpadding="0" align="right"><br><tbody><br><tr align="right"><br><td><img src="http://www.ibm.com/i/c.gif" alt="" width="100%" height="4"><br><br><table border="0" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="middle"><img src="http://www.ibm.com/i/v14/icons/u_bold.gif" border="0" alt="" width="16" height="16"><br></td><br><td align="right" valign="top"><a class="fbox" href="http://www.ibm.com/developerworks/cn/java/j-jsf2/#main" target="_blank" rel="noopener"><strong>回页首</strong></a></td><br></tr><br></tbody><br></table><br></td><br></tr><br></tbody><br></table><br><p><br></p><br><p><a name="N10256"><span class="atitle">开始编码</span></a></p><br><p>开始编写这个示例程序的最好方法是遍历它的使用案例：</p><br><ol><br><li>新增 CD</li><br><li>编辑现有的 CD</li><br><li>根据标题对 CD 进行排序</li><br><li>根据艺术家对 CD 进行排序</li><br></ol><br><p>第三个使用案例和第四个使用案例的代码基本上是相同的，因此我将向您展示如何根据标题进行排序，并将第四个使用案例留作练习，请您自行完成。我们很快就会对使用案例进行编码，但是首先让我们来了解一下完成后的应用程序的页面将是什么样子。</p><br><table border="0" cellspacing="0" cellpadding="0" width="40%" align="right"><br><tbody><br><tr><br><td width="10"><img src="http://www.ibm.com/i/c.gif" alt="" width="10" height="1"></td><br><td><br><table border="1" cellspacing="0" cellpadding="5" width="100%"><br><tbody><br><tr><br><td bgcolor="#eeeeee"><br>                <a name="sidebar3"><strong>并非真正的 CRUD</strong></a><br><br><p>注意这个程序并不是一个真正的 CRUD 清单程序。它实际上只是一个 <em>CRU</em> 清单，因为我将 <em>D</em> 留给您自己实现了。但是无须担心，它非常简单。删除操作的步骤与编辑操作的步骤非常类似，后者在本文中已经实现了。您可以完成 CRUD 吗？</p><br></td><br></tr><br></tbody><br></table><br></td><br></tr><br></tbody><br></table><br><p>图 4 显示了具有可排序列的 CD 清单页面。</p><br><p><br><br>                <br><a name="figure4"><strong>图 4. 具有可排序列的 CD 清单页面</strong></a><br><br>                <img src="http://www.ibm.com/developerworks/cn/java/j-jsf2/figure4.jpg" alt="CD 清单" width="500" height="427"></p><br><p>图 5 显示了具有分类组件的 CD 表单页面。</p><br><p><br><br>                <br><a name="figure5"><strong>图 5. 尚未选择分类的 CD 表单页面</strong></a><br><br>                <img src="http://www.ibm.com/developerworks/cn/java/j-jsf2/figure5.jpg" alt="CD 表单" width="500" height="427"></p><br><p>图 6 显示了具有分类和子类组件的 CD 表单页面。</p><br><p><br><br>                <br><a name="figure6"><strong>图 6. 已经选择了分类和子类组件的 CD 表单页面</strong></a><br><br>                <img src="http://www.ibm.com/developerworks/cn/java/j-jsf2/figure6.jpg" alt="CD 表单" width="510" height="435"><br>            <br></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td><img src="http://www.ibm.com/i/v14/rules/blue_rule.gif" alt="" width="100%" height="1"><br><img src="http://www.ibm.com/i/c.gif" border="0" alt="" width="8" height="6"></td><br></tr><br></tbody><br></table><br><table class="no-print" border="0" cellspacing="0" cellpadding="0" align="right"><br><tbody><br><tr align="right"><br><td><img src="http://www.ibm.com/i/c.gif" alt="" width="100%" height="4"><br><br><table border="0" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="middle"><img src="http://www.ibm.com/i/v14/icons/u_bold.gif" border="0" alt="" width="16" height="16"><br></td><br><td align="right" valign="top"><a class="fbox" href="http://www.ibm.com/developerworks/cn/java/j-jsf2/#main" target="_blank" rel="noopener"><strong>回页首</strong></a></td><br></tr><br></tbody><br></table><br></td><br></tr><br></tbody><br></table><br><p><br></p><br><p><a name="N102B9"><span class="atitle">使用案例 1：新增 CD</span></a></p><br><p>在该程序的第一个使用案例中，用户将添加一个新 CD：切换到 CD 清单页面上，点击 <strong>Add CD</strong> 链接（这是在 listing.jsp 文件中定义的），如清单 1 所示。</p><br><p><br>            <br><a name="N102C5"><strong>清单 1. 在 listing.jsp 中定义的 Add CD 按钮</strong></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td class="code-outline"><br><pre class="displaycode">&lt;h:commandLink action=”#{CDManagerBean.addNew}”&gt;<br>     &lt;f:verbatim&gt;Add CD&lt;/f:verbatim&gt;<br>&lt;/h:commandLink&gt; <br></pre><br></td><br></tr><br></tbody><br></table><br><p>&nbsp;</p><br><p>这个链接被绑定到 <code>CDManagerBean</code> 的 <code>addNew</code> 方法上。这个 <code>addNew</code> 方法在 JSF 生命周期的调用程序阶段（最后一个阶段）被调用的。操作被使用 JSF 绑定表达式 <code>#{CDManagerBean.addNew}</code> 绑定到这个方法上。<code>CDManagerBean</code> 是这个程序的存储控制器的一个别名。<code>CDManagerBean</code> 是这个控制器的逻辑名。控制器类是一个在 faces-config.xml 文件中定义的管理 bean，如清单 2 所示。</p><br><p><br>            <br><a name="N102EA"><strong>清单 2. 在 faces-config.xml 中定义的 StoreController 类</strong></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td class="code-outline"><br><pre class="displaycode">&lt;managed-bean&gt;<br>  &lt;description&gt;The “backing file” bean that backs up the CD application&lt;/description&gt;<br>  &lt;managed-bean-name&gt;CDManagerBean&lt;/managed-bean-name&gt;<br>  &lt;managed-bean-class&gt;com.arcmind.jsfquickstart.controller.StoreController&lt;/managed-bean-class&gt;<br>  &lt;managed-bean-scope&gt;session&lt;/managed-bean-scope&gt;<br>&lt;/managed-bean&gt;<br></pre><br></td><br></tr><br></tbody><br></table><br><p>&nbsp;</p><br><p><a name="N102F4"><span class="smalltitle">准备表单</span></a></p><br><p><br>                <code>addNew()</code> 方法通过创建一个空 CD 来准备表单，如清单 3 所示。</p><br><p><br>            <br><a name="N10301"><strong>清单 3. <code>addNew()</code> 创建一个空 CD 表单</strong></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td class="code-outline"><br><pre class="displaycode">[StoreController.java]<br>/<strong><br> <em> Prepare the cdForm to add a new CD. <br> </em> This gets executed before we prompt<br> <em> the user to add a new CD.<br> </em><br> <em> @return success<br> </em>/<br>public String addNew() {<br>    if (subCategoryList == null) {<br>        subCategoryList = new HtmlSelectOneListbox();<br>    }<br><br>    subCategoryList.setRendered(false);<br>    this.cd = new CD();<br><br>    return “success”;<br>}<br></strong></pre><br></td><br></tr><br></tbody><br></table><br><p>&nbsp;</p><br><p><br>                <code>addNew()</code> 方法通过创建一个新的 CD 来清空 CD 表单域。这个 CD 表单的域被绑定到 <code>cd</code> 属性的属性中。这个方法还会将正在显示的子类清单置空。</p><br><p><a name="N1031A"><span class="smalltitle">返回成功结果</span></a></p><br><p>接下来，<code>addNew()</code> 方法会被调用，控制权被重定向到成功映射页面，即 cdForm.jsp 文件。cdForm.jsp 文件是在 faces-config.xml 文件中定义的，如清单 4 所示。</p><br><p><br>            <br><a name="N10327"><strong>清单 4. cdForm.jsp 是 <code>addNew()</code> 的成功映射</strong></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td class="code-outline"><br><pre class="displaycode">&lt;navigation-rule&gt;<br>  &lt;from-view-id&gt;/listing.jsp&lt;/from-view-id&gt;<br>  …<br>  &lt;navigation-case&gt;<br>    &lt;from-action&gt;#{CDManagerBean.addNew}&lt;/from-action&gt;<br>    &lt;from-outcome&gt;success&lt;/from-outcome&gt;<br>    &lt;to-view-id&gt;/cdForm.jsp&lt;/to-view-id&gt;<br>  &lt;/navigation-case&gt;<br>    <br>&lt;/navigation-rule&gt;<br></pre><br></td><br></tr><br></tbody><br></table><br><p>&nbsp;</p><br><p>清单 4 表明如果用户从清单切换到 <code>addNew (#{CDManagerBean.addNew})</code> 操作，并且 <code>addNew</code> 操作成功返回，那就会切换到 cdForm.jsp 页面。</p><br><p><a name="N10340"><span class="smalltitle">设置 cdForm 和 panelGrid</span></a></p><br><p><br>                <em>cdForm.jsp</em> 是包含 CD 表单的表单。其中具有 ID、Title、Artist、Price、Category 和 Subcategory 的域。这些域被放到一个名为 <code>panelGrid</code> 的容器中。JSF 组件，例如 AWT 组件，具有一些容器和组件。<em>容器</em> 是一个包含其他组件的组件。这是一个 <em>混合设计模式</em> 的例子。<code>panelGrid</code> 有 3 列。每个域都各在一行中，还会有一个标签和消息用于显示该域的错误消息。<code>cdForm</code> 和 <code>panelGrid</code> 是在清单 5 中定义的。</p><br><p><br>            <br><a name="N10362"><strong>清单 5. 定义 <code>cdForm</code> 和 <code>panelGrid</code><br>            </strong></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td class="code-outline"><br><pre class="displaycode">&lt;f:view&gt;<br>    &lt;h2&gt;CD Form&lt;/h2&gt;<br> <br>    &lt;h:form id=”cdForm”&gt;<br> <br>    &lt;h:inputHidden id=”cdid” value=”#{CDManagerBean.cd.id}”/&gt;<br> <br>    &lt;h:panelGrid columns=”3” rowClasses=”row1, row2”&gt;<br> <br>       &lt;h:outputLabel for=”title” styleClass=”label”&gt;<br>           &lt;h:outputText value=”Title”/&gt;<br>       &lt;/h:outputLabel&gt;<br><br>       &lt;h:inputText id=”title” value=”#{CDManagerBean.cd.title}” required=”true”/&gt;<br><br>       &lt;h:message for=”title” styleClass=”errorText”/&gt;<br><br>       &lt;h:outputLabel for=”artist” styleClass=”label”&gt;<br>           &lt;h:outputText value=”Artist”/&gt;<br>       &lt;/h:outputLabel&gt;<br><br>       &lt;h:inputText id=”artist” value=”#{CDManagerBean.cd.artist}” required=”true”/&gt;<br><br>       &lt;h:message  for=”artist”  styleClass=”errorText”/&gt;<br><br>       &lt;h:outputLabel  for=”price” styleClass=”label”&gt;<br>           &lt;h:outputText value=”Price”/&gt;<br>       &lt;/h:outputLabel&gt;<br><br>       &lt;h:inputText id=”price” value=”#{CDManagerBean.cd.price}” required=”true”/&gt;<br><br>       &lt;h:message for=”price” styleClass=”errorText”/&gt;<br><br>       &lt;h:outputLabel for=”category” styleClass=”label”&gt;<br>           &lt;h:outputText value=”Category”/&gt;<br>       &lt;/h:outputLabel&gt;<br><br>       &lt;h:selectOneRadio id=”category” value=”#{CDManagerBean.cd.category}” immediate=”true” <br>         onclick=”submit()”<br>         valueChangeListener=”#{CDManagerBean.categorySelected}”&gt;<br>           &lt;f:selectItems value=”#{CDManagerBean.categories}”/&gt;<br>       &lt;/h:selectOneRadio&gt;<br><br>       &lt;h:message for=”category” styleClass=”errorText”/&gt;<br><br>       &lt;h:outputLabel for=”subcategory” styleClass=”label”&gt;<br>           &lt;h:outputText value=”Subcategory”/&gt;<br>       &lt;/h:outputLabel&gt;<br>    <br>       &lt;h:selectOneListbox id=”subcategory” value=”#{CDManagerBean.cd.subCategory}”<br>         binding=”#{CDManagerBean.subCategoryList}”&gt;<br>           &lt;f:selectItems value=”#{CDManagerBean.subCategories}”/&gt;<br>       &lt;/h:selectOneListbox&gt;<br><br>       &lt;h:message  for=”subcategory”  styleClass=”errorText”/&gt;<br><br>    &lt;/h:panelGrid&gt;<br><br>    &lt;br /&gt;<br><br>    &lt;h:commandButton id=”submitAdd” action=”#{CDManagerBean.addCD}” value=”Add CD” <br>      rendered=”#{not CDManagerBean.editMode}”/&gt;<br><br>    &lt;h:commandButton id=”submitUpdate” action=”#{CDManagerBean.updateCD}” value=”Update CD” <br>      rendered=”#{CDManagerBean.editMode}”/&gt;<br><br>    &lt;/h:form&gt;<br>        <br>&lt;/f:view&gt;<br></pre><br></td><br></tr><br></tbody><br></table><br><p>&nbsp;</p><br><p><a name="N10374"><span class="smalltitle">关于代码的注释</span></a></p><br><p>每个输入域都将该域绑定到控制器的 <code>cd</code> 属性的一个属性上。例如，标题的输入文本域被使用下面的 JSF 绑定表达式绑定到 <code>cd</code> 属性上：<code>value=”#{CDManagerBean.cd.title}”</code>。</p><br><p>您可能会注意到在清单 5 中几乎没有什么 HTML 语句。这是由于 <code>panelGrid</code> 会生成大部分的 HMTL 语句。注意实际的外观是由与 <code>panelGrid</code> 相关的样式表决定的。属性 <code>rowClasses=”row1, row2”</code> 会为正在修改的行设置 CSS 类。第一行是白色的，第二行是灰色的。您还可以为列或其他内容指定 CSS 类。JSF <code>panelGrid</code> 组件可以方便地快速设置表单的布局。如果您希望实现 <code>panelGrid</code> 没有提供的功能，就不能使用它：不过可以使用 HTML 自己设置组件的布局。然而，如果您发现自己在很多页面上都使用了定制的 HTML，那么就可能会考虑编写自己的定制组件。这种想法可以让您尽可能 <em>DRY</em> 地重用 HTML 语句（DRY 是 <em>don’t repeat yourself</em> 的缩写，这个术语来自于 Dave Thomas 的 <em>Pragmatic Programmer</em> 一书）。</p><br><p>关于清单 5 另外需要注意的是控制器有一个 <em>editMode</em> 属性，由 cdForm.jsp 用于有选择地显示 <code>submitAdd</code> 按钮或 <code>submitUpdate</code> 按钮；<code>submitAdd</code> 按钮是在表单不处于编辑模式时显示的。<code>submitUpdate</code> 按钮是在表单处于编辑模式时显示的。这可以简化为编辑和添加模式使用相同的 JSP。（默认情况下，表单不处于编辑模式。）这种功能是由 cdForm.jsp 中的每个按钮上的呈现表达式实现的。例如，清单 6 列出了 <code>submitAdd button rendered=”#{not<br>CDManagerBean.editMode}”</code> 上的呈现表达式。<code>submitAdd</code> 按钮被使用表达式 (<code>action=”#{CDManagerBean.addCD}”</code>) 绑定到 <code>addCD</code> 方法上。</p><br><p><br>            <br><a name="N103CF"><strong>清单 6. 使用 <code>addCD()</code> 方法添加一个 CD</strong></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td class="code-outline"><br><pre class="displaycode">[StoreController.java]<br>/<br> <em> Add a cd to the store.<br> </em><br> <em> @return outcome<br> </em>/<br>public String addCD() {<br>    store.addCD(this.cd);<br><br>    return “success”;<br>}<br></pre><br></td><br></tr><br></tbody><br></table><br><p>&nbsp;</p><br><p><a name="N103DD"><span class="smalltitle">对域进行有效性验证</span></a></p><br><p>在 <code>addCD</code><br>方法被调用之前，JSF 必须对 GUI<br>中的域进行有效性验证。这实际上非常简单，因为您还没有为域关联任何有效性验证条件。在应用请求值阶段，这些值被从请求参数拷贝到组件值中（这是由组件本<br>身进行的）。现在，价格从一个字符串转换为一个浮点类型。如果用户为价格输入的是&ldquo;abc&rdquo;，那么转换为浮点类型的操作就会失败，控制权将被重新定向到<br>cdForm.jsp 页面上，供最终用户进行修正。与价格相关的 <code>h:message</code><br>将显示一个转换错误消息。如果所有的值都可以正常进行类型转换，并且现在都可以使用了（如果需要的话），那么您就可以进行有效性验证的处理了。由于这个示<br>例程序并没有与组件关联任何有效性验证规则（在下一篇文章中我们将介绍这种特性），因此您可以继续进入更新模型值的阶段了。</p><br><p>在更新模型值的阶段中，会使用保存在 GUI 组件中的经过转换和有效性验证的值来调用 CD 的赋值方法。<code>addCD()</code> 方法是在 <em>调用程序</em> 阶段中被调用的。<code>addCD()</code> 方法使用一个业务代理（<code>store</code> 对象）来执行这个操作。<code>addCD</code> 方法在系统中使用 <code>store</code> 对象来存储 CD。由于 <code>addCD</code> 方法会返回成功，因此接下来会显示这个清单，这是在 faces-config.xm 中定义的。在 faces-config.xml 中定义的导航规则如清单 7 所示。</p><br><p><br>            <br><a name="N1040C"><strong>清单 7. <code>addCD</code> 成功输出的导航规则</strong></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td class="code-outline"><br><pre class="displaycode">&lt;navigation-rule&gt;<br>  &lt;from-view-id&gt;/cdForm.jsp&lt;/from-view-id&gt;<br>  &lt;navigation-case&gt;<br>    &lt;from-action&gt;#{CDManagerBean.addCD}&lt;/from-action&gt;<br>    &lt;from-outcome&gt;success&lt;/from-outcome&gt;<br>    &lt;to-view-id&gt;/listing.jsp&lt;/to-view-id&gt;<br>  &lt;/navigation-case&gt;<br>  …<br>&lt;/navigation-rule&gt;<br></pre><br></td><br></tr><br></tbody><br></table><br><p><br></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td><img src="http://www.ibm.com/i/v14/rules/blue_rule.gif" alt="" width="100%" height="1"><br><img src="http://www.ibm.com/i/c.gif" border="0" alt="" width="8" height="6"></td><br></tr><br></tbody><br></table><br><table class="no-print" border="0" cellspacing="0" cellpadding="0" align="right"><br><tbody><br><tr align="right"><br><td><img src="http://www.ibm.com/i/c.gif" alt="" width="100%" height="4"><br><br><table border="0" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="middle"><img src="http://www.ibm.com/i/v14/icons/u_bold.gif" border="0" alt="" width="16" height="16"><br></td><br><td align="right" valign="top"><a class="fbox" href="http://www.ibm.com/developerworks/cn/java/j-jsf2/#main" target="_blank" rel="noopener"><strong>回页首</strong></a></td><br></tr><br></tbody><br></table><br></td><br></tr><br></tbody><br></table><br><p><br></p><br><p><a name="N1041A"><span class="atitle">使用案例 2：编辑 CD</span></a></p><br><p>这个示例程序的第二个使用案例也会在这个清单页面（listing.jsp）中启动。除了向您介绍如何编辑 JSF 页面中的数据之外，这个使用案例还将向您介绍 JSF <code>dataTable</code> 组件。</p><br><p>这个清单页面使用一个 <code>dataTable</code> 组件来显示 CD 的清单。<code>dataTable</code> 的值被绑定到控制程序类 <code>StoreController</code> 的 <code>cds</code> 属性。<code>cds</code> 属性的定义如清单 8 所示。</p><br><p><br>            <br><a name="N1043E"><strong>清单 8. 在 StoreController.java 中定义的 <code>cds</code> 属性</strong></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td class="code-outline"><br><pre class="displaycode">[StoreController.java]<br>/<strong> List of cds for CD listing. */<br>private DataModel cdModel = new ListDataModel();<br>{<br>    cdModel.setWrappedData(store.findTitleAsc());<br> }<br>/</strong><br> <em> List of CDs in the system.<br> </em><br> <em> @return Returns the cds.<br> </em>/<br>public DataModel getCds() {<br>    return cdModel;<br>}<br></pre><br></td><br></tr><br></tbody><br></table><br><p>&nbsp;</p><br><p><br>                <code>cds</code> 属性是基于从存储对象 <code>StoreManagerDelegate</code> 返回的 <code>java.util.List</code> 的，这个对象是该程序的业务代理。<code>cdModel</code> 对从 <code>DataModel</code> 中的存储对象返回的清单进行了封装。<code>DataModel</code> 是一个用于 <code>dataTable</code> 的模型。</p><br><p><br>                <code>dataTable</code> 的定义如清单 9 所示。</p><br><p><br>            <br><a name="N10472"><strong>清单 9. listing.jsp 中的 <code>dataTable</code> 定义</strong></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td class="code-outline"><br><pre class="displaycode">&lt;f:view&gt;<br>    &lt;h:form&gt;    <br>      &lt;h:dataTable id=”items” <br>        value=”#{CDManagerBean.cds}” <br>        var=”cd”<br>        rowClasses=”oddRow, evenRow” <br>        headerClass=”tableHeader”&gt;<br></pre><br></td><br></tr><br></tbody><br></table><br><p>&nbsp;</p><br><p>注意该值被绑定到控制程序的 <em>cds</em> 属性上。<code>rowClasses</code> 和 <code>headerClass</code> 属性用来指定 CSS 类，后者用来定义 <code>dataTable</code> 的外观。正如前面介绍的一样，JSF 严重依赖于 CSS 来定义 GUI 的外观。如果您并不了解 CSS（即您之前都是使用字体标签和 HTML 表来设置外观的），就可能会希望在灵活运行 JSF 之前首先来学习一下有关 CSS 的知识。</p><br><p><a name="N10492"><span class="smalltitle">column 组件</span></a></p><br><p><br>                <code>Title</code>、<code>Artist</code> 和 <code>Price</code> 域都是使用 <code>column</code> 组件显示的，如清单 10 所示（此处只显示了 <code>Title</code> 域）。</p><br><p><br>            <br><a name="N104AF"><strong>清单 10. 在 column 组件中添加域</strong></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td class="code-outline"><br><pre class="displaycode">&lt;h:column&gt;<br>    &lt;f:facet name=”header”&gt;<br>      …<br>        &lt;h:outputText value=”Title”/&gt;<br>    &lt;/f:facet&gt;<br>      &lt;h:commandLink action=”#{CDManagerBean.editCD}”&gt;<br>        &lt;h:outputText value=”#{cd.title}”/&gt;<br>      &lt;/h:commandLink&gt;<br>&lt;/h:column&gt;<br></pre><br></td><br></tr><br></tbody><br></table><br><p>&nbsp;</p><br><p><br>                <code>column</code> 组件是 <code>dataTable</code> 的一个子组件。<code>column</code> 组件使用一个子组件和一个 facet。<em>facet</em> 是一个有名的子组件；它并不是一个子孙组件。<code>column</code> 组件有一个名为 <em>header</em> 的 facet，它定义了在 header 中显示的内容。对于本例来说，<code>commandLink</code> 是 <code>column</code> 组件的一个子孙组件。<code>commandLink</code> 在一个链接中显示了 CD 的标题，该链接被绑定到操作 <code>#{CDManagerBean.editCD}</code> 上。这个操作属性将 <code>commandLink</code> 绑定到控制程序类的 <code>editCD()</code> 方法上，如清单 11 所示。</p><br><p><br>            <br><a name="N104EA"><strong>清单 11. <code>editCD</code> commandLink 的后台 bean 方法 </strong></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td class="code-outline"><br><pre class="displaycode">[StoreController.java]<br>/<strong><br> <em> Edit the CD. This get executed before the edit cdForm <br> </em> page gets loaded.<br> <em><br> </em> @return outcome<br> */<br>public String editCD() {<br>    this.cd = (CD) cdModel.getRowData();<br>    this.cd = (CD) store.getCDById(cd.getId());<br><br>    if ((cd.getCategory() != null) || !””.equals(cd.getCategory())) {<br>        this.subCategoryList.setRendered(true);<br><br>        this.subCategories = getSubcategoriesList(cd.getCategory());<br>    } else {<br>        this.subCategoryList.setRendered(false);<br>    }<br><br>    this.editMode = true;<br><br>    return “success”;<br>}<br></strong></pre><br></td><br></tr><br></tbody><br></table><br><p>&nbsp;</p><br><p><a name="N104F8"><span class="smalltitle"><br>                <code>editCD()</code> 方法</span></a></p><br><p><br>                <code>editCD()</code> 方法是在 JSF 生命周期的调用程序阶段调用的。<code>editCD()</code> 方法准备控制程序以使用编辑模式来显示 cdForm.jsp 页面。这是通过查看当前选定的 CD 来实现的，CD 是通过调用 <code>cdModel.getRowData()</code> 方法来选择的。</p><br><p>注意 JSF <code>DataModel</code> 允许您从比传统的 Web 应用程序更高的层次上使用数据。您并不需要对请求参数进行检查：只需要调用 <code>cdModel.getRowData()</code> 方法向 <code>DataModel</code>（<code>cdModel</code>）查询已经选择了哪个 CD。这个更高级别的抽象对 Web 开发进行了相当程度的简化。</p><br><p>一旦取得当前选择的 CD 之后，就可以使用业务代理来加载该 CD 的最新拷贝了（<code>store.getCDById()</code>）。在加载这个 CD 之后，<code>store.getCDById()</code> 会激活 <code>subCategory</code> 清单（假设这个 CD 已经关联了一个子目录），然后将 <code>editMode</code> 属性设置为 <code>true</code>。回想一下，<code>editMode</code> 属性是由 <code>cdForm</code> 用来显示 Add 或 Update 按钮。最后，<code>store.getCDById()</code> 方法返回 <em>success</em>。在清单 12 中重要的导航规则可以保证返回成功之后，切换到 cdForm.jsp 页面，如下所示。</p><br><p><br>            <br><a name="N1054A"><strong>清单 12. 一条重要的导航规则</strong></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td class="code-outline"><br><pre class="displaycode">&lt;navigation-rule&gt;<br>  &lt;from-view-id&gt;/listing.jsp&lt;/from-view-id&gt;<br>  &lt;navigation-case&gt;<br>    &lt;from-action&gt;#{CDManagerBean.editCD}&lt;/from-action&gt;<br>    &lt;from-outcome&gt;success&lt;/from-outcome&gt;<br>    &lt;to-view-id&gt;/cdForm.jsp&lt;/to-view-id&gt;<br>  &lt;/navigation-case&gt;<br>  &lt;navigation-case&gt;<br>    &lt;from-action&gt;#{CDManagerBean.addNew}&lt;/from-action&gt;<br>    &lt;from-outcome&gt;success&lt;/from-outcome&gt;<br>    &lt;to-view-id&gt;/cdForm.jsp&lt;/to-view-id&gt;<br>  &lt;/navigation-case&gt;<br>&lt;/navigation-rule&gt;<br></pre><br></td><br></tr><br></tbody><br></table><br><p>&nbsp;</p><br><p><a name="N10554"><span class="smalltitle"><br>                <code>updateCD()</code> 方法</span></a></p><br><p>CD 表单会加载并显示 CD 属性的属性设置。最终用户可以根据需要编辑所得到的表单，并在完成时点击 Update 按钮。Update 按钮是当用户处于 Edit 模式时所显示的惟一一个按钮，它只会在 <code>editMode</code> 为 <code>true</code> 时显示，如清单 13 所示。</p><br><p><br>            <br><a name="N10569"><strong>清单 13. Update CD 按钮</strong></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td class="code-outline"><br><pre class="displaycode">[cdForm.jsp]<br><br>&lt;h:commandButton id=”submitUpdate” <br>  action=”#{CDManagerBean.updateCD}” <br>  value=”Update CD” <br>  endered=”#{CDManagerBean.editMode}”/&gt;<br></pre><br></td><br></tr><br></tbody><br></table><br><p>&nbsp;</p><br><p>Update 按钮被绑定到 <code>updateCD()</code><br>方法上。在调用 update 方法之前，JSF 必须对 GUI<br>中的域进行有效性验证。在应用请求值阶段，这些值被从请求参数中拷贝到组件值中（这是由组件本身完成的）。现在，价格被从一个字符串转换成了一个浮点类<br>型。由于没有为组件关联任何有效性验证规则，因此如果所有请求的值都已经存在并经过转换了，就可以转换到生命周期的下一个步骤了。</p><br><p><a name="N1057A"><span class="smalltitle">更新模型值</span></a></p><br><p>在更新模型值阶段中，会使用保存在 GUI 组件中经过类型转换和有效性验证的值来调用 CD 的赋值函数。<code>updateCD()</code> 方法是在调用程序阶段被调用的。<code>updateCD()</code> 方法如清单 14 所示。</p><br><p><br>            <br><a name="N1058B"><strong>清单 14. <code>updateCD()</code> 方法</strong></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td class="code-outline"><br><pre class="displaycode">[StoreController.java]<br><br>/<br> <em> Update the CD loaded on the form.<br> </em><br> <em> @return success<br> </em>/<br>public String updateCD() {<br>    store.updateCD(this.cd);<br>    this.editMode = false;<br><br>    return “success”;<br>}<br></pre><br></td><br></tr><br></tbody><br></table><br><p>&nbsp;</p><br><p><br>                <code>updateCD()</code> 方法可以代理业务代理的大部分职责。它将 <code>editMode</code>  设置为 <code>false</code>（这是默认值），并返回成功。成功输出将您重定向回清单页面中，在这个页面中您可以查看根据清单 15 中显示的导航规则新编辑的 CD。</p><br><p><br>            <br><a name="N105A8"><strong>清单 15. 成功的 UpdateCD 会将您带回 listing.jsp</strong></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td class="code-outline"><br><pre class="displaycode">[faces-config.xml]<br>&lt;navigation-rule&gt;<br>  &lt;from-view-id&gt;/cdForm.jsp&lt;/from-view-id&gt;<br>  …    <br>  &lt;navigation-case&gt;<br>    &lt;from-action&gt;#{CDManagerBean.updateCD}&lt;/from-action&gt;<br>    &lt;from-outcome&gt;success&lt;/from-outcome&gt;<br>    &lt;to-view-id&gt;/listing.jsp&lt;/to-view-id&gt;<br>  &lt;/navigation-case&gt;<br>&lt;/navigation-rule&gt;<br></pre><br></td><br></tr><br></tbody><br></table><br><p><br></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td><img src="http://www.ibm.com/i/v14/rules/blue_rule.gif" alt="" width="100%" height="1"><br><img src="http://www.ibm.com/i/c.gif" border="0" alt="" width="8" height="6"></td><br></tr><br></tbody><br></table><br><table class="no-print" border="0" cellspacing="0" cellpadding="0" align="right"><br><tbody><br><tr align="right"><br><td><img src="http://www.ibm.com/i/c.gif" alt="" width="100%" height="4"><br><br><table border="0" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="middle"><img src="http://www.ibm.com/i/v14/icons/u_bold.gif" border="0" alt="" width="16" height="16"><br></td><br><td align="right" valign="top"><a class="fbox" href="http://www.ibm.com/developerworks/cn/java/j-jsf2/#main" target="_blank" rel="noopener"><strong>回页首</strong></a></td><br></tr><br></tbody><br></table><br></td><br></tr><br></tbody><br></table><br><p><br></p><br><p><a name="N105B2"><span class="atitle">使用案例 3：对 CD 进行排序</span></a></p><br><p>我们要介绍的最后一个使用案例将向您展示如何对表进行排序。这个使用案例也是在 CD 清单页面上启动的。清单页允许根据标题和艺术家对 CD 按照升序或降序的顺序进行排列。在本例中，我将向您展示如何根据标题进行排序，并将根据艺术家进行排序留作练习。</p><br><p>标题头排序有一些到控制程序中排序方法的链接。清单 16 显示了在 listing.jsp 中是如何显示标题头的。</p><br><p><br>            <br><a name="N105BE"><strong>清单 16. 对 commandLinks 进行排序</strong></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td class="code-outline"><br><pre class="displaycode">[listing.jsp]<br>&lt;h:column&gt;<br>  &lt;f:facet name=”header”&gt;<br>     &lt;h:panelGroup&gt;<br>        &lt;h:outputText value=”Title”/&gt;<br>          &lt;f:verbatim&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[&lt;/f:verbatim&gt;<br>              &lt;h:commandLink styleClass=”smallLink” action=”#{CDManagerBean.sortTitleAsc}”&gt;<br>                  &lt;h:outputText id=”ascTitle” value=”asc”/&gt;<br>              &lt;/h:commandLink&gt;<br>                  &lt;h:outputText value=”,”/&gt;<br>              &lt;h:commandLink styleClass=”smallLink” action=”#{CDManagerBean.sortTitleDec}”&gt;<br>                   &lt;h:outputText id=”decTitle” value=”dec”/&gt;<br>              &lt;/h:commandLink&gt;<br>          &lt;f:verbatim&gt;]&lt;/f:verbatim&gt;<br>     &lt;/h:panelGroup&gt; <br>  &lt;/f:facet&gt;<br>              &lt;h:commandLink action=”#{CDManagerBean.editCD}”&gt;<br>                 &lt;h:outputText value=”#{cd.title}”/&gt;<br>              &lt;/h:commandLink&gt; <br>&lt;/h:column&gt;<br></pre><br></td><br></tr><br></tbody><br></table><br><p>&nbsp;</p><br><p><a name="N105C8"><span class="smalltitle">panelGroup 组件</span></a></p><br><p>注意一下清单 16，链接是在标题列的 header facet 中定义的。facet 只会关联一个惟一名字的组件；这样，要在 header facet 中放置一个多链接的组件，您需要使用 <code>panelGroup</code>。<code>panelGroup</code> （与 <code>panelGrid</code> 类似）是一个单独的组件，其中包含了很多子组件。<code>panelGroup</code> 包含两个链接，如清单 17 所示。</p><br><p><br>            <br><a name="N105E1"><strong>清单 17. <code>panelGroup</code> 组件链接</strong></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td class="code-outline"><br><pre class="displaycode">[listing.jsp]<br>&lt;h:commandLink styleClass=”smallLink” action=”#{CDManagerBean.sortTitleAsc}”&gt;<br>    &lt;h:outputText id=”ascTitle” value=”asc”/&gt;<br>&lt;/h:commandLink&gt;<br>…    <br>&lt;h:commandLink styleClass=”smallLink” action=”#{CDManagerBean.sortTitleDec}”&gt;<br>    &lt;h:outputText id=”decTitle” value=”dec”/&gt;<br>&lt;/h:commandLink&gt;<br></pre><br></td><br></tr><br></tbody><br></table><br><p>&nbsp;</p><br><p>第一个链接被绑定到控制程序的 <code>sortTitleAsc</code> 方法上，第二个链接被绑定到 <code>sortTitleDec</code> 上。这两个方法如清单 18 所示。</p><br><p><br>            <br><a name="N105FA"><strong>清单 18. <code>panelGroup</code> 链接方法</strong></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td class="code-outline"><br><pre class="displaycode">[StoreController.java ]<br>/<strong><br> <em> Uses the store delegate to return<br> </em> a sorted list of CDs by title (ascending).<br> <em><br> </em> @return asc<br> */<br>public String sortTitleAsc() {<br>    this.cdModel.setWrappedData(store.findTitleAsc());<br><br>    return “asc”;<br>}<br><br>/</strong><br> <em> Uses the store delegate to return<br> </em> a sorted list of CDs by title (descending).<br> <em><br> </em> @return dec<br> <em>/<br>public String sortTitleDec() {<br>    this.cdModel.setWrappedData(store.findTitleDec());<br><br>    return “dec”;<br>}<br></em></pre><br></td><br></tr><br></tbody><br></table><br><p>&nbsp;</p><br><p>这两个方法都依赖于业务代理返回一个按照正确要求排序后的 <code>java.util.List</code>。注意这个方法会返回逻辑输出 <code>asc</code> 和 <code>dec</code>。这两个输出在 faces-config.xml 文件中都没有映射。没有映射的输出会导致重新加载当前的视图；这样，listing.jsp 将会在调用这些方法时重新进行加载，清单页面也会按照正确的顺序重新显示。</p><br><p>这<br>种方法的优点是它依赖于业务代理进行排序。业务代理又可能会依赖于一个 DAO 对象，而后者又依赖于一个数据库查询或 OR 映射查询，这样可以对<br>CD 进行有效的查询。这种方法通常比具有一个&ldquo;智能&rdquo; GUI 组件的方法更好，后一种方法知道如何对随机的域对象（CD<br>就是一个域对象）进行排序，因为排序操作是一个经常发生的操作，严格来说，是模型的一部分（即域对象的一部分），而不是视图的一部分。</p><br><p>正如前面介绍的一样，对标题进行排序和对艺术家进行排序的代码几乎是相同的。作为一个练习，请自己试图为第四个使用案例编写代码，对艺术家而不是标题进行排序。</p><br><p>&nbsp;</p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td><img src="http://www.ibm.com/i/v14/rules/blue_rule.gif" alt="" width="100%" height="1"><br><img src="http://www.ibm.com/i/c.gif" border="0" alt="" width="8" height="6"></td><br></tr><br></tbody><br></table><br><table class="no-print" border="0" cellspacing="0" cellpadding="0" align="right"><br><tbody><br><tr align="right"><br><td><img src="http://www.ibm.com/i/c.gif" alt="" width="100%" height="4"><br><br><table border="0" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="middle"><img src="http://www.ibm.com/i/v14/icons/u_bold.gif" border="0" alt="" width="16" height="16"><br></td><br><td align="right" valign="top"><a class="fbox" href="http://www.ibm.com/developerworks/cn/java/j-jsf2/#main" target="_blank" rel="noopener"><strong>回页首</strong></a></td><br></tr><br></tbody><br></table><br></td><br></tr><br></tbody><br></table><br><p><br></p><br><p><a name="immediate"><span class="atitle">即时事件处理</span></a></p><br><p>我<br>们要介绍的最后一个主题是即时事件处理。即时事件处理在您不希望（或需要）对整个页面进行有效性验证来处理用户输入的情况中非常有用。回想一下，示例程序<br>的 cdForm.jsp 页面使用单选按钮来显示一个目录和子目录清单。当最终用户选择一个目录时，cdForm.jsp 页面就会使用<br>JavaScript 重新生成表单，这样就可以显示子目录清单了。</p><br><p>这是一个即时事件处理的例子，因为整个表单 <em>没有</em><br>在调用事件处理程序之前进行有效性验证。相反，类清单的事件处理程序会生成子目录，并强制 JSF<br>跳过进行响应的阶段。组件的事件处理程序通常都是在调用程序阶段执行的。即时事件组件的事件处理程序是在应用请求值阶段执行的，这发生在其余组件的类型转<br>换和有效性验证之前。</p><br><p>清单 19 显示了在 cdForm.jsp 页面中再次显示的目录清单。</p><br><p><br>            <br><a name="N1062F"><strong>清单 19. cdForm.jsp 中的目录清单</strong></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td class="code-outline"><br><pre class="displaycode">[cdForm.jsp]<br>&lt;h:selectOneRadio id=”category” value=”#{CDManagerBean.cd.category}”<br>  immediate=”true”<br>  onclick=”submit()”<br>  valueChangeListener=”#{CDManagerBean.categorySelected}”&gt;<br>    &lt;f:selectItems value=”#{CDManagerBean.categories}”/&gt;<br>&lt;/h:selectOneRadio&gt;<br></pre><br></td><br></tr><br></tbody><br></table><br><p>&nbsp;</p><br><p><br>                <code>selectOneRadio</code> 目录域被绑定到 <code>CD</code> 的目录属性（<code>value=”#{CDManagerBean.cd.category}”</code>）上。注意这个即时事件处理被激活了（<code>immediate=”true”</code>）。这种设置意味着 <code>Category</code> 组件的事件会在应用值阶段（而不是在调用程序阶段）进行处理（以及类型转换和有效性验证）。</p><br><p>JavaScript 功能是在 <code>onclick=”submit()”</code> 这一行 &mdash;&mdash; 即当用户进行修改时，它应该立即被提交到 Web 程序中进行处理。</p><br><p><a name="N10657"><span class="smalltitle">事件处理程序方法</span></a></p><br><p>在清单中显示的可用分类是由 <code>f:selectItems</code> 标签值（<code>value=”#{CDManagerBean.categories}”</code>）确定的。这个组件的事件处理程序的变化是控制程序的 <code>categorySelected()</code> 方法（<code>valueChangeListener=”#{CDManagerBean.categorySelected}”</code>）。事件处理程序如清单 20 所示。</p><br><p><br>            <br><a name="N10670"><strong>清单 20. <code>categorySelected</code> 事件处理程序</strong></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td class="code-outline"><br><pre class="displaycode">[StoreController.java]<br>/**<br>  Event Handler for a category getting selected.<br> <em><br> </em> @param event event data<br> <em>/<br>public void categorySelected(ValueChangeEvent event) {<br>    subCategoryList.setRendered(true);<br><br>    String value = (String) event.getNewValue();<br><br>    if (value != null) {<br>        this.subCategories = this.getSubcategoriesList(value);<br>    }<br><br>    FacesContext context = FacesContext.getCurrentInstance();<br>    context.renderResponse();<br>}<br></em></pre><br></td><br></tr><br></tbody><br></table><br><p>&nbsp;</p><br><p><br>                <code>categorySelected()</code> 方法做的第一件事情是允许 <code>subCategoryList</code> 调用自己。<code>categorySelected()</code> 方法然后会使用所选择的分类值来查找一个 <code>subCategories</code> 清单。<code>subCategories</code> 属性被绑定到 <code>subcategoryList</code> 值上。接下来，事件处理程序通过调用当前 <code>FacesContext</code> 上的 <code>renderResponse()</code> 方法强制 JSF 转到进行响应阶段。然后，GUI（cdForm.jsp）为当前显示的目录重新显示可用的子目录。</p><br><p><a name="N106A1"><span class="smalltitle">将组件绑定到控制程序上</span></a></p><br><p><br>                <code>subCategoryList</code> 组件是从 GUI 上绑定的。正如您可以将值绑定到组件上一样，您也可以将这些组件绑定到一个控制程序上。子目录是在 cdForm.jsp 页面中定义的，如清单 21 所示。</p><br><p><br>            <br><a name="N106AE"><strong>清单 21. 在 cdForm.jsp 页面中定义的子目录清单</strong></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td class="code-outline"><br><pre class="displaycode">[cdForm.jsp]<br>&lt;h:selectOneListbox id=”subcategory” value=”#{CDManagerBean.cd.subCategory}”<br>  binding=”#{CDManagerBean.subCategoryList}”&gt;<br>    &lt;f:selectItems value=”#{CDManagerBean.subCategories}”/&gt;<br>&lt;/h:selectOneListbox&gt;<br></pre><br></td><br></tr><br></tbody><br></table><br><p>&nbsp;</p><br><p><br>                <code>binding</code> 属性允许您将 GUI 的组件绑定到后端的 bean（控制程序）上。这样，上面的组件就会被绑定到 <code>CDManagerBean.subCategoryList</code> 上，这是在清单 22 中定义的控制程序中的一个属性。</p><br><p><br>            <br><a name="N106C3"><strong>清单 22. <code>subCategoryList</code> 属性</strong></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td class="code-outline"><br><pre class="displaycode">[StoreController.java ]<br>/** GUI Component that represents <br>   the Subcategory list on the CDForm. /<br>private UIInput subCategoryList;<br><br>{<br>    subCategoryList = new HtmlSelectOneListbox();<br>}<br><br>/<strong><br> <em> Subcategory list component<br> </em><br> <em> @param aSubCategoryList The subCategoryList to set.<br> </em><br> <em> @uml.property name=”subCategoryList”<br> </em>/<br>public void setSubCategoryList(UIInput aSubCategoryList) {<br>    this.subCategoryList = aSubCategoryList;<br>}<br><br>/</strong><br> <em> Subcategory list component<br> </em><br> <em> @return Returns the subCategoryList.<br> </em><br> <em> @uml.property name=”subCategoryList”<br> </em>/<br>public UIInput getSubCategoryList() {<br>    return subCategoryList;<br>}<br></pre><br></td><br></tr><br></tbody><br></table><br><p>&nbsp;</p><br><p>即时事件处理只使用了很少的一点 JavaScript 功能（<code>onclick=”submit()”</code> 命令），这种灵活的 JSF 生命周期的便利可以让您处理在一个组件中输入的信息，而不用对整个页面进行有效性验证。在这个例子中，我们已经介绍了 <code>Category</code> 组件的即时处理是如何让您可以显示子目录，而不用重新加载页面的。</p><br><p>&nbsp;</p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td><img src="http://www.ibm.com/i/v14/rules/blue_rule.gif" alt="" width="100%" height="1"><br><img src="http://www.ibm.com/i/c.gif" border="0" alt="" width="8" height="6"></td><br></tr><br></tbody><br></table><br><table class="no-print" border="0" cellspacing="0" cellpadding="0" align="right"><br><tbody><br><tr align="right"><br><td><img src="http://www.ibm.com/i/c.gif" alt="" width="100%" height="4"><br><br><table border="0" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="middle"><img src="http://www.ibm.com/i/v14/icons/u_bold.gif" border="0" alt="" width="16" height="16"><br></td><br><td align="right" valign="top"><a class="fbox" href="http://www.ibm.com/developerworks/cn/java/j-jsf2/#main" target="_blank" rel="noopener"><strong>回页首</strong></a></td><br></tr><br></tbody><br></table><br></td><br></tr><br></tbody><br></table><br><p><br></p><br><p><a name="N106DC"><span class="atitle">结束语</span></a></p><br><p>下<br>面对这个 JSF 系列的第二篇文章进行总结：在本文中我们使用了一个范例和三个使用案例来介绍 JSF<br>请求处理的生命周期，并展示了其组件模型的一些必备特性。我们还介绍了如何组合使用 JSF 和 Struts Tiles，在 JSF<br>页面之间实现更加统一的布局，如何使用 <code>DataModel</code>，以及如何组合使用 JSF 和 JavaScript 进行即时事件的处理。</p><br><p>第 3 部分将继续本文的介绍，内容涉及一些高级特性，例如类型转换和有效性验证。我们将向您展示如何创建自己定制的 JSF<br>有效性验证规则和类型转换规则，以及在调用时如何使用内置的规则。</p><br><p><br>        <br></p><br><p><a name="resources"><span class="atitle">参考资料 </span></a></p><br><ul><br><li> 您可以参阅本文在 developerWorks 全球站点上的 <a href="http://www.ibm.com/developerworks/java/library/j-jsf2/" target="_blank">英文原文</a>。<br></li><br><li>点击页面顶部或底部的 <strong>Code</strong> 图标，下载本文中的源代码。<br></li><br><li>不要错过 Rick Hightower 撰写的 <a href="http://www.ibm.com/developerworks/views/java/libraryview.jsp?search_by=nonbelievers:" target="_blank" rel="noopener"><br>                        <em>怀疑论者的 JSF</em><br>                    </a> 系列文章。<br></li><br><li>访问 Sun Microsystems 的网站，下载 <a href="http://java.sun.com/j2ee/javaserverfaces/download.html" target="_blank" rel="noopener">JavaServer Faces APIs</a>、定制标签库及相关文档。<br></li><br><li>有关 Ant 和 Maven 的安装和编译环境的详细说明，请参阅本系列文章作者的 <a href="http://www.arc-mind.com/jsf/resources/jsf-article2.html" target="_blank" rel="noopener">JSF 资源</a>。<br></li><br><li>可以从 <a href="http://maven.apache.org/start/download.html" target="_blank" rel="noopener">Apache Maven Project</a> 下载 Maven。<br></li><br><li>也学习更多有关 Struts Tiles 的内容，请参阅 <a href="http://www.ibm.com/developerworks/java/edu/j-dw-java-tiles-i.%20html" target="_blank" rel="noopener">Master the Tiles framework</a> 教程（developerWorks，2003 年 12 月）。<br></li><br><li>Jackwind Li Guojie 的 <a href="http://www.ibm.com/developerworks/edu/j-dw-java-jsf-i.html" target="_blank" rel="noopener">UI<br>development with JavaServer Faces</a> 教程（developerWorks，2003 年 9 月）是有关这种技术的一篇早期介绍。<br></li><br><li>Roland Barcia 的 5 部分的 <a href="http://www.ibm.com/developerworks/websphere/techjournal/%200401_barcia/barcia.html" target="_blank" rel="noopener">Developing JSF Applications using WebSphere<br>Studio V5.1.1</a> （developerWorks，2004 年 1 月）教程是一个有关使用 JSF 编程的简介。<br></li><br><li>Srikanth Shenoy 和 Nithin Mallya 在高级文章 <a href="http://www.ibm.com/developerworks/java/library/j-integrate/" target="_blank" rel="noopener"><br>Integrating Struts, Tiles, and JavaServer Faces</a><br>（developerWorks，2003 年 9 月）中，介绍了如何集成 Struts、Tiles 和 JavaServer Faces 的特性。<br></li><br><li>David Geary 的 <a href="http://devworks.krcinfo.com/WebForms/ProductDetails.aspx?ProductID%20=0131463055" target="_blank" rel="noopener">Core JavaServer Faces</a>（Prentice Hall，2004 年 6 月）是一本对 JavaServer Faces 技术进行全面介绍的书籍。<br></li><br><li>您还可能希望了解 Sun Microsystems 的 <a href="http://java.sun.com/j2ee/1.4/docs/tutorial/doc/JSFIntro.html" target="_blank" rel="noopener"><br>JSF 详细教程</a>。<br></li><br><li>在 developerWorks <a href="http://www.ibm.com/developerworks/cn/java/" target="_blank" rel="noopener">Java 技术</a> 专区中可以找到有关 Java 编程各个方面的文章。<br></li><br><li>访问 <a href="http://devworks.krcinfo.com/" target="_blank" rel="noopener">The Developer<br>Bookstore</a> 中全面的技术书籍列表，包括数百本 <a href="http://devworks.krcinfo.com/WebForms/ProductList.aspx?search=FreeText&amp;SearchT=Keyword&amp;txtSearch=java" target="_blank" rel="noopener">有关 Java 主题的书籍</a>。<br></li><br><li>还请参阅 <a href="http://www.ibm.com/developerWorks/cn/" target="_blank" rel="noopener">developerWorks</a> 的 <a href="http://www-900.ibm.com/developerWorks/cn/cnedu.nsf/java-onlinecourse-bytitle?OpenView&amp;Count=500" target="_blank" rel="noopener">Java 技术专区</a> 中有关 Java 的免费教程清单。<br></li><br></ul><br><p><br>        <br></p><br><p><a name="author"><span class="atitle">关于作者</span></a></p><br><table border="0" cellspacing="0" cellpadding="0" width="100%"><br><tbody><br><tr><br><td colspan="3"><img src="http://www.ibm.com/i/c.gif" alt="" width="100%" height="5"></td><br></tr><br><tr align="left" valign="top"><br><td></td><br><td><img src="http://www.ibm.com/i/c.gif" alt="" width="4" height="5"></td><br><td width="100%"><br><p>Rick Hightower 是 ArcMind 公司的 CTO。他是 <em>Java Tools for Extreme<br>Programming</em> 一书的合著者之一，这是一本关于在 J2EE 开发中采用极限编程的书；他也是 <em>Professional Struts</em> 一书的合著者之一。他还在 Warner Onstine 出版了 <a href="http://www.arc-mind.com/courses/jsfCourse.html" target="_blank" rel="noopener">JSF QuickStart</a><br>一书，本系列文章的一些素材就来自这本书中的一些例子。有关 JSF 生命周期的讨论是基于在 ArcMind 教程中有关<br>Warner 的讨论进行的，同时还提供了一些 Hightower 的补充。您可以通过 <a href="mailto:rhightower@arc-mind.com?cc=jaloi@us.ibm.com" target="_blank" rel="noopener">rhightower@arc-mind.com</a> 与作者联系。</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>转自：<a href="http://www.ibm.com/developerworks/cn/java/j-jsf2/" target="_blank" rel="noopener">http://www.ibm.com/developerworks/cn/java/j-jsf2/</a></p><br></td><br></tr><br></tbody><br></table>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/blog/tags/JSF/" rel="tag"># JSF</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/blog/cjcuko5b400zk4urqx3rx1erk/" rel="next" title="什么是JSF">
                <i class="fa fa-chevron-left"></i> 什么是JSF
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/blog/cjcuko5bt010m4urqwf8v1d71/" rel="prev" title="使用一个PhaseListener来熟悉JSF 生命周期">
                使用一个PhaseListener来熟悉JSF 生命周期 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Vanessa</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/blog/archives/">
              
                  <span class="site-state-item-count">874</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">224</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Vanessa</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/blog/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/blog/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/blog/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/blog/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/blog/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/blog/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
